{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/app/api/messages/send/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\ntype MessageRequest = {\r\n  sellerId: string;\r\n  productHandle: string;\r\n  productTitle: string;\r\n  message: string;\r\n};\r\n\r\n// Demo: Store messages in memory (in production, this would be saved to a database)\r\nconst messages: Array<MessageRequest & { id: string; timestamp: Date }> = [];\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = (await request.json()) as MessageRequest;\r\n\r\n    // Validate required fields\r\n    if (!body.sellerId || !body.productHandle || !body.message?.trim()) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Create message\r\n    const newMessage = {\r\n      id: `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      ...body,\r\n      timestamp: new Date()\r\n    };\r\n\r\n    messages.push(newMessage);\r\n\r\n    // In production, you would:\r\n    // 1. Save message to database\r\n    // 2. Send notification to seller (email, push notification, etc.)\r\n    // 3. Create conversation thread if it doesn't exist\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      messageId: newMessage.id,\r\n      message: 'Message sent successfully'\r\n    });\r\n  } catch (error) {\r\n    console.error('Error sending message:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to send message' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// Get messages for a seller (for demo purposes)\r\nexport async function GET(request: NextRequest) {\r\n  const { searchParams } = new URL(request.url);\r\n  const sellerId = searchParams.get('sellerId');\r\n\r\n  if (!sellerId) {\r\n    return NextResponse.json(\r\n      { error: 'sellerId is required' },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  const sellerMessages = messages.filter(msg => msg.sellerId === sellerId);\r\n  return NextResponse.json(sellerMessages);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AASA,oFAAoF;AACpF,MAAM,WAAoE,EAAE;AAErE,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAQ,MAAM,QAAQ,IAAI;QAEhC,2BAA2B;QAC3B,IAAI,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,aAAa,IAAI,CAAC,KAAK,OAAO,EAAE,QAAQ;YAClE,OAAO,yPAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,iBAAiB;QACjB,MAAM,aAAa;YACjB,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;YAClE,GAAG,IAAI;YACP,WAAW,IAAI;QACjB;QAEA,SAAS,IAAI,CAAC;QAEd,4BAA4B;QAC5B,8BAA8B;QAC9B,kEAAkE;QAClE,oDAAoD;QAEpD,OAAO,yPAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,WAAW,WAAW,EAAE;YACxB,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,yPAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACb,OAAO,yPAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,iBAAiB,SAAS,MAAM,CAAC,CAAA,MAAO,IAAI,QAAQ,KAAK;IAC/D,OAAO,yPAAY,CAAC,IAAI,CAAC;AAC3B","debugId":null}}]
}