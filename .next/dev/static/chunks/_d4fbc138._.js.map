{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/cart/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { TAGS } from 'lib/constants';\r\nimport {\r\n  addToCart,\r\n  createCart,\r\n  getCart,\r\n  removeFromCart,\r\n  updateCart\r\n} from 'lib/shopify';\r\nimport { revalidateTag, revalidatePath } from 'next/cache';\r\nimport { cookies } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function addItem(\r\n  prevState: any,\r\n  formData: FormData | string | undefined\r\n) {\r\n  // Handle both old API (string) and new API (FormData)\r\n  let selectedVariantId: string | undefined;\r\n  let deliveryPrice: number | undefined;\r\n  \r\n  if (formData instanceof FormData) {\r\n    selectedVariantId = formData.get('variantId') as string | undefined;\r\n    const deliveryPriceStr = formData.get('deliveryPrice') as string | undefined;\r\n    deliveryPrice = deliveryPriceStr ? Number(deliveryPriceStr) : undefined;\r\n  } else {\r\n    // Backward compatibility with old API\r\n    selectedVariantId = formData as string | undefined;\r\n  }\r\n  \r\n  if (!selectedVariantId) {\r\n    return 'Error adding item to cart';\r\n  }\r\n\r\n  try {\r\n    let cart = await getCart();\r\n    \r\n    // If cart doesn't exist, create one\r\n    if (!cart) {\r\n      cart = await createCart();\r\n      (await cookies()).set('cartId', cart.id!);\r\n    }\r\n    \r\n    await addToCart([{ merchandiseId: selectedVariantId, quantity: 1 }], deliveryPrice);\r\n    revalidateTag(TAGS.cart, 'seconds');\r\n    revalidatePath('/', 'layout'); // Revalidate the root layout to update cart\r\n  } catch (e) {\r\n    console.error('Error adding item to cart:', e);\r\n    return 'Error adding item to cart';\r\n  }\r\n}\r\n\r\nexport async function removeItem(prevState: any, merchandiseId: string) {\r\n  try {\r\n    const cart = await getCart();\r\n\r\n    if (!cart) {\r\n      return 'Error fetching cart';\r\n    }\r\n\r\n    const lineItem = cart.lines.find(\r\n      (line) => line.merchandise.id === merchandiseId\r\n    );\r\n\r\n    if (lineItem && lineItem.id) {\r\n      await removeFromCart([lineItem.id]);\r\n      revalidateTag(TAGS.cart, 'seconds');\r\n    } else {\r\n      return 'Item not found in cart';\r\n    }\r\n  } catch (e) {\r\n    return 'Error removing item from cart';\r\n  }\r\n}\r\n\r\nexport async function updateItemQuantity(\r\n  prevState: any,\r\n  payload: {\r\n    merchandiseId: string;\r\n    quantity: number;\r\n  }\r\n) {\r\n  const { merchandiseId, quantity } = payload;\r\n\r\n  try {\r\n    const cart = await getCart();\r\n\r\n    if (!cart) {\r\n      return 'Error fetching cart';\r\n    }\r\n\r\n    const lineItem = cart.lines.find(\r\n      (line) => line.merchandise.id === merchandiseId\r\n    );\r\n\r\n    if (lineItem && lineItem.id) {\r\n      if (quantity === 0) {\r\n        await removeFromCart([lineItem.id]);\r\n      } else {\r\n        await updateCart([\r\n          {\r\n            id: lineItem.id,\r\n            merchandiseId,\r\n            quantity\r\n          }\r\n        ]);\r\n      }\r\n    } else if (quantity > 0) {\r\n      // If the item doesn't exist in the cart and quantity > 0, add it\r\n      await addToCart([{ merchandiseId, quantity }]);\r\n    }\r\n\r\n    revalidateTag(TAGS.cart, 'seconds');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return 'Error updating item quantity';\r\n  }\r\n}\r\n\r\nexport async function redirectToCheckout() {\r\n  let cart = await getCart();\r\n  redirect(cart!.checkoutUrl);\r\n}\r\n\r\nexport async function createCartAndSetCookie() {\r\n  let cart = await createCart();\r\n  (await cookies()).set('cartId', cart.id!);\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAcsB,UAAA,WAAA,GAAA,IAAA,2VAAA,EAAA,8CAAA,gVAAA,EAAA,KAAA,GAAA,sVAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/product/product-context.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport React, { createContext, useContext, useMemo, useOptimistic } from 'react';\r\n\r\ntype ProductState = {\r\n  [key: string]: string;\r\n} & {\r\n  image?: string;\r\n};\r\n\r\ntype ProductContextType = {\r\n  state: ProductState;\r\n  updateOption: (name: string, value: string) => ProductState;\r\n  updateImage: (index: string) => ProductState;\r\n};\r\n\r\nconst ProductContext = createContext<ProductContextType | undefined>(undefined);\r\n\r\nexport function ProductProvider({ children }: { children: React.ReactNode }) {\r\n  const searchParams = useSearchParams();\r\n\r\n  const getInitialState = () => {\r\n    const params: ProductState = {};\r\n    for (const [key, value] of searchParams.entries()) {\r\n      params[key] = value;\r\n    }\r\n    return params;\r\n  };\r\n\r\n  const [state, setOptimisticState] = useOptimistic(\r\n    getInitialState(),\r\n    (prevState: ProductState, update: ProductState) => ({\r\n      ...prevState,\r\n      ...update\r\n    })\r\n  );\r\n\r\n  const updateOption = (name: string, value: string) => {\r\n    const newState = { [name]: value };\r\n    setOptimisticState(newState);\r\n    return { ...state, ...newState };\r\n  };\r\n\r\n  const updateImage = (index: string) => {\r\n    const newState = { image: index };\r\n    setOptimisticState(newState);\r\n    return { ...state, ...newState };\r\n  };\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      state,\r\n      updateOption,\r\n      updateImage\r\n    }),\r\n    [state]\r\n  );\r\n\r\n  return <ProductContext.Provider value={value}>{children}</ProductContext.Provider>;\r\n}\r\n\r\nexport function useProduct() {\r\n  const context = useContext(ProductContext);\r\n  if (context === undefined) {\r\n    throw new Error('useProduct must be used within a ProductProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useUpdateURL() {\r\n  const router = useRouter();\r\n\r\n  return (state: ProductState) => {\r\n    const newParams = new URLSearchParams(window.location.search);\r\n    Object.entries(state).forEach(([key, value]) => {\r\n      newParams.set(key, value);\r\n    });\r\n    router.push(`?${newParams.toString()}`, { scroll: false });\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;AAHA;;;AAiBA,MAAM,+BAAiB,IAAA,uSAAa,EAAiC;AAE9D,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;;IACzE,MAAM,eAAe,IAAA,iQAAe;IAEpC,MAAM,kBAAkB;QACtB,MAAM,SAAuB,CAAC;QAC9B,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,aAAa,OAAO,GAAI;YACjD,MAAM,CAAC,IAAI,GAAG;QAChB;QACA,OAAO;IACT;IAEA,MAAM,CAAC,OAAO,mBAAmB,GAAG,IAAA,uSAAa,EAC/C;yCACA,CAAC,WAAyB,SAAyB,CAAC;gBAClD,GAAG,SAAS;gBACZ,GAAG,MAAM;YACX,CAAC;;IAGH,MAAM,eAAe,CAAC,MAAc;QAClC,MAAM,WAAW;YAAE,CAAC,KAAK,EAAE;QAAM;QACjC,mBAAmB;QACnB,OAAO;YAAE,GAAG,KAAK;YAAE,GAAG,QAAQ;QAAC;IACjC;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,WAAW;YAAE,OAAO;QAAM;QAChC,mBAAmB;QACnB,OAAO;YAAE,GAAG,KAAK;YAAE,GAAG,QAAQ;QAAC;IACjC;IAEA,MAAM,QAAQ,IAAA,iSAAO;0CACnB,IAAM,CAAC;gBACL;gBACA;gBACA;YACF,CAAC;yCACD;QAAC;KAAM;IAGT,qBAAO,sTAAC,eAAe,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AACjD;GAzCgB;;QACO,iQAAe;QAUA,uSAAa;;;KAXnC;AA2CT,SAAS;;IACd,MAAM,UAAU,IAAA,oSAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB;AAQT,SAAS;;IACd,MAAM,SAAS,IAAA,2PAAS;IAExB,OAAO,CAAC;QACN,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;QAC5D,OAAO,OAAO,CAAC,OAAO,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;YACzC,UAAU,GAAG,CAAC,KAAK;QACrB;QACA,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,UAAU,QAAQ,IAAI,EAAE;YAAE,QAAQ;QAAM;IAC1D;AACF;IAVgB;;QACC,2PAAS","debugId":null}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/lib/demo/sellers.ts"],"sourcesContent":["export type Seller = {\r\n  id: string;\r\n  name: string;\r\n  avatar: string; // url\r\n  location: string; // Dubai, Sharjah...\r\n  address: string; // Detailed address\r\n  rating: number; // 4.2\r\n  reviews: number; // 38\r\n  memberSince: string; // 2023\r\n  responseTime: string; // \"Typically replies in 10 min\"\r\n  completedDeals: number;\r\n  phone?: string; // Contact phone\r\n  email?: string; // Contact email\r\n};\r\n\r\nexport const SELLERS: Seller[] = [\r\n  {\r\n    id: \"sara\",\r\n    name: \"Sara M.\",\r\n    avatar: \"https://i.pravatar.cc/160?img=5\",\r\n    location: \"Dubai\",\r\n    address: \"Villa 12, Al Barsha South, Dubai Marina, Dubai, UAE\",\r\n    rating: 4.8,\r\n    reviews: 63,\r\n    memberSince: \"2022\",\r\n    responseTime: \"Typically replies in 15 min\",\r\n    completedDeals: 41,\r\n    phone: \"+971 50 123 4567\",\r\n    email: \"sara.m@example.com\"\r\n  },\r\n  {\r\n    id: \"ahmed\",\r\n    name: \"Ahmed K.\",\r\n    avatar: \"https://i.pravatar.cc/160?img=12\",\r\n    location: \"Sharjah\",\r\n    address: \"Building 45, Al Qasimia, King Faisal Street, Sharjah, UAE\",\r\n    rating: 4.6,\r\n    reviews: 28,\r\n    memberSince: \"2023\",\r\n    responseTime: \"Typically replies in 1 hour\",\r\n    completedDeals: 19,\r\n    phone: \"+971 55 234 5678\",\r\n    email: \"ahmed.k@example.com\"\r\n  },\r\n  {\r\n    id: \"maria\",\r\n    name: \"Maria S.\",\r\n    avatar: \"https://i.pravatar.cc/160?img=47\",\r\n    location: \"Abu Dhabi\",\r\n    address: \"Apartment 301, Al Khalidiyah, Corniche Road, Abu Dhabi, UAE\",\r\n    rating: 4.9,\r\n    reviews: 91,\r\n    memberSince: \"2021\",\r\n    responseTime: \"Typically replies in 10 min\",\r\n    completedDeals: 58,\r\n    phone: \"+971 50 345 6789\",\r\n    email: \"maria.s@example.com\"\r\n  },\r\n  {\r\n    id: \"yousef\",\r\n    name: \"Yousef A.\",\r\n    avatar: \"https://i.pravatar.cc/160?img=32\",\r\n    location: \"Ajman\",\r\n    address: \"Villa 8, Al Nuaimiya, Sheikh Rashid Bin Humaid Street, Ajman, UAE\",\r\n    rating: 4.5,\r\n    reviews: 17,\r\n    memberSince: \"2024\",\r\n    responseTime: \"Typically replies in 2 hours\",\r\n    completedDeals: 12,\r\n    phone: \"+971 55 456 7890\",\r\n    email: \"yousef.a@example.com\"\r\n  },\r\n  {\r\n    id: \"fatima\",\r\n    name: \"Fatima R.\",\r\n    avatar: \"https://i.pravatar.cc/160?img=9\",\r\n    location: \"RAK\",\r\n    address: \"Building 23, Al Qawasim, Al Qasr Street, Ras Al Khaimah, UAE\",\r\n    rating: 4.7,\r\n    reviews: 22,\r\n    memberSince: \"2023\",\r\n    responseTime: \"Typically replies in 30 min\",\r\n    completedDeals: 16,\r\n    phone: \"+971 50 567 8901\",\r\n    email: \"fatima.r@example.com\"\r\n  }\r\n];\r\n\r\nexport function getSellerById(id: string) {\r\n  return SELLERS.find((s) => s.id === id) ?? SELLERS[0];\r\n}\r\n"],"names":[],"mappings":";;;;;;AAeO,MAAM,UAAoB;IAC/B;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,aAAa;QACb,cAAc;QACd,gBAAgB;QAChB,OAAO;QACP,OAAO;IACT;IACA;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,aAAa;QACb,cAAc;QACd,gBAAgB;QAChB,OAAO;QACP,OAAO;IACT;IACA;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,aAAa;QACb,cAAc;QACd,gBAAgB;QAChB,OAAO;QACP,OAAO;IACT;IACA;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,aAAa;QACb,cAAc;QACd,gBAAgB;QAChB,OAAO;QACP,OAAO;IACT;IACA;QACE,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,aAAa;QACb,cAAc;QACd,gBAAgB;QAChB,OAAO;QACP,OAAO;IACT;CACD;AAEM,SAAS,cAAc,EAAU;IACtC,OAAO,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,OAAO,CAAC,EAAE;AACvD","debugId":null}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/rockets/DeliveryWidget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from 'next/navigation';\r\nimport { PlusIcon } from '@heroicons/react/24/outline';\r\nimport { addItem } from 'components/cart/actions';\r\nimport { useCart } from 'components/cart/cart-context';\r\nimport { useProduct } from 'components/product/product-context';\r\nimport { Product } from 'lib/shopify/types';\r\nimport { getSellerById } from 'lib/demo/sellers';\r\nimport { DeliveryAddress } from 'lib/demo/user';\r\n\r\ntype Props = {\r\n  listingId: string;\r\n  product: Product;\r\n  sellerId: string;\r\n  declaredValueAed?: number;\r\n  weightKg?: number;\r\n  fragile?: boolean;\r\n};\r\n\r\nexport default function DeliveryWidget(props: Props) {\r\n  const seller = getSellerById(props.sellerId);\r\n  const router = useRouter();\r\n  const { addCartItem } = useCart();\r\n  const { state } = useProduct();\r\n  const [message, setMessage] = useState<string | null>(null);\r\n  \r\n  const [pickupArea, setPickupArea] = useState(seller?.address || seller?.location || \"Dubai\");\r\n  const [addresses, setAddresses] = useState<DeliveryAddress[]>([]);\r\n  const [selectedAddressId, setSelectedAddressId] = useState<string>(\"\");\r\n  const [selectedTimeWindows, setSelectedTimeWindows] = useState<string[]>([]);\r\n  const [quote, setQuote] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingAddresses, setLoadingAddresses] = useState(true);\r\n  \r\n  // Time windows for delivery\r\n  const timeWindows = [\r\n    { value: \"morning\", label: \"Morning (9:00 - 12:00)\" },\r\n    { value: \"afternoon\", label: \"Afternoon (12:00 - 17:00)\" },\r\n    { value: \"evening\", label: \"Evening (17:00 - 21:00)\" }\r\n  ];\r\n\r\n  // Load user addresses\r\n  useEffect(() => {\r\n    async function loadAddresses() {\r\n      try {\r\n        const response = await fetch('/api/account/addresses');\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setAddresses(data);\r\n          // Auto-select default address if available\r\n          const defaultAddr = data.find((addr: DeliveryAddress) => addr.isDefault);\r\n          if (defaultAddr) {\r\n            setSelectedAddressId(defaultAddr.id);\r\n          } else if (data.length > 0) {\r\n            setSelectedAddressId(data[0].id);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load addresses:', error);\r\n      } finally {\r\n        setLoadingAddresses(false);\r\n      }\r\n    }\r\n    loadAddresses();\r\n  }, []);\r\n\r\n  // Get selected address\r\n  const selectedAddress = addresses.find(addr => addr.id === selectedAddressId);\r\n  const dropoffAddress = selectedAddress \r\n    ? `${selectedAddress.addressLine1}${selectedAddress.addressLine2 ? ', ' + selectedAddress.addressLine2 : ''}, ${selectedAddress.city}${selectedAddress.state ? ', ' + selectedAddress.state : ''} ${selectedAddress.postalCode}, ${selectedAddress.country}`\r\n    : \"\";\r\n  \r\n  // Get selected variant\r\n  const variant = props.product.variants.find((v) =>\r\n    v.selectedOptions.every(\r\n      (option) => option.value === state[option.name.toLowerCase()]\r\n    )\r\n  );\r\n  const defaultVariantId = props.product.variants.length === 1 ? props.product.variants[0]?.id : undefined;\r\n  const selectedVariantId = variant?.id || defaultVariantId;\r\n  const finalVariant = props.product.variants.find(\r\n    (v) => v.id === selectedVariantId\r\n  );\r\n\r\n  async function getQuote() {\r\n    if (!dropoffAddress.trim()) {\r\n      setQuote(null);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/rockets/quote\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          listingId: props.listingId,\r\n          pickupArea,\r\n          dropoffArea: dropoffAddress,\r\n          declaredValueAed: props.declaredValueAed ?? 300,\r\n          weightKg: props.weightKg ?? 3,\r\n          fragile: props.fragile ?? false\r\n        })\r\n      });\r\n      const quoteData = await res.json();\r\n      setQuote(quoteData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching quote:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Auto-load quote when selectedAddressId changes (with debounce)\r\n  useEffect(() => {\r\n    if (!selectedAddressId || loadingAddresses) {\r\n      setQuote(null);\r\n      return;\r\n    }\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      if (dropoffAddress.trim()) {\r\n        getQuote();\r\n      } else {\r\n        setQuote(null);\r\n      }\r\n    }, 500); // Debounce for 500ms\r\n\r\n    return () => clearTimeout(timeoutId);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedAddressId, dropoffAddress, pickupArea, props.listingId, props.declaredValueAed, props.weightKg, props.fragile, loadingAddresses]);\r\n\r\n  // Handle time window selection\r\n  const handleTimeWindowToggle = (value: string) => {\r\n    setSelectedTimeWindows(prev => \r\n      prev.includes(value) \r\n        ? prev.filter(tw => tw !== value)\r\n        : [...prev, value]\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-6 rounded-2xl border border-neutral-200 p-4\">\r\n      <div className=\"flex items-start justify-between gap-4\">\r\n        <div>\r\n          <div className=\"text-sm font-semibold\">ðŸšš Delivery by Rockets</div>\r\n          <div className=\"text-xs text-neutral-600\">Peer-to-peer item pickup â†’ delivery to buyer</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-3 space-y-3\">\r\n        <label className=\"grid gap-1\">\r\n          <span className=\"text-xs text-neutral-600\">Delivery Address <span className=\"text-red-500\">*</span></span>\r\n          {loadingAddresses ? (\r\n            <div className=\"rounded-lg border px-3 py-2 text-sm bg-neutral-50 dark:bg-neutral-800 text-neutral-500\">\r\n              Loading addresses...\r\n            </div>\r\n          ) : addresses.length === 0 ? (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"rounded-lg border px-3 py-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200\">\r\n                No addresses saved. <a href=\"/account#addresses\" className=\"underline\">Add address</a>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <select\r\n              className=\"rounded-lg border border-neutral-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-neutral-700 dark:bg-black dark:text-white\"\r\n              value={selectedAddressId}\r\n              onChange={(e) => setSelectedAddressId(e.target.value)}\r\n              disabled={loading}\r\n              required\r\n            >\r\n              <option value=\"\">Select delivery address</option>\r\n              {addresses.map((addr) => (\r\n                <option key={addr.id} value={addr.id}>\r\n                  {addr.label} {addr.isDefault && '(Default)'} - {addr.addressLine1}, {addr.city}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n          {selectedAddress && (\r\n            <div className=\"mt-1 rounded-lg border px-3 py-2 text-xs bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400\">\r\n              {selectedAddress.fullName} Â· {selectedAddress.phone}<br />\r\n              {selectedAddress.addressLine1}\r\n              {selectedAddress.addressLine2 && `, ${selectedAddress.addressLine2}`}<br />\r\n              {selectedAddress.city}{selectedAddress.state && `, ${selectedAddress.state}`} {selectedAddress.postalCode}, {selectedAddress.country}\r\n            </div>\r\n          )}\r\n        </label>\r\n\r\n        <label className=\"grid gap-1\">\r\n          <span className=\"text-xs text-neutral-600\">Delivery Time Windows <span className=\"text-red-500\">*</span></span>\r\n          <div className=\"space-y-2\">\r\n            {timeWindows.map((tw) => (\r\n              <label key={tw.value} className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedTimeWindows.includes(tw.value)}\r\n                  onChange={() => handleTimeWindowToggle(tw.value)}\r\n                  disabled={loading}\r\n                  className=\"rounded border-neutral-300 text-blue-600 focus:ring-blue-500\"\r\n                />\r\n                <span className=\"text-sm\">{tw.label}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n          {selectedTimeWindows.length === 0 && (\r\n            <p className=\"text-xs text-red-500 mt-1\">Please select at least one time window</p>\r\n          )}\r\n        </label>\r\n      </div>\r\n\r\n      {loading && selectedAddressId ? (\r\n        <div className=\"mt-4 text-center text-sm text-neutral-600\">Calculating delivery cost...</div>\r\n      ) : quote ? (\r\n        <div className=\"mt-4 space-y-3\">\r\n          <div className=\"rounded-xl border p-4 bg-neutral-50 dark:bg-neutral-800\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <div className=\"text-sm font-semibold\">Delivery Cost</div>\r\n                <div className=\"text-xs text-neutral-600\">\r\n                  ETA: {quote.eta_hours || '24-72'}h Â· Insurance: {quote.insurance_included ? \"Included\" : \"Not included\"}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-lg font-bold\">{quote.price} {quote.currency}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {finalVariant && selectedVariantId ? (\r\n            <form\r\n              action={async () => {\r\n                if (!selectedAddressId || selectedTimeWindows.length === 0) {\r\n                  setMessage('Please select delivery address and at least one time window');\r\n                  return;\r\n                }\r\n                \r\n                try {\r\n                  const deliveryPrice = Number(quote.price) || 0;\r\n                  \r\n                  // Optimistic update with delivery price\r\n                  if (finalVariant) {\r\n                    // @ts-ignore - deliveryPrice is supported in addCartItem\r\n                    addCartItem(finalVariant, props.product, deliveryPrice);\r\n                  }\r\n                  // Server action - call addItem directly with FormData\r\n                  const formData = new FormData();\r\n                  formData.set('variantId', selectedVariantId!);\r\n                  formData.set('deliveryPrice', deliveryPrice.toString());\r\n                  const result = await addItem(null, formData as any);\r\n                  \r\n                  // Refresh the router to update the cart\r\n                  router.refresh();\r\n                  \r\n                  setMessage(result || 'Item added to cart');\r\n                } catch (error) {\r\n                  setMessage('Error adding item to cart');\r\n                  console.error('Error:', error);\r\n                }\r\n              }}\r\n            >\r\n              <button\r\n                type=\"submit\"\r\n                className=\"relative flex w-full items-center justify-center rounded-xl bg-blue-600 px-4 py-3 text-sm font-bold text-white transition-colors hover:bg-blue-700 disabled:opacity-60 dark:bg-blue-500 dark:hover:bg-blue-600\"\r\n                disabled={loading || !selectedVariantId || !props.product.availableForSale || !selectedAddressId || selectedTimeWindows.length === 0}\r\n              >\r\n                <div className=\"absolute left-0 ml-4\">\r\n                  <PlusIcon className=\"h-5\" />\r\n                </div>\r\n                Add to Cart with Delivery\r\n              </button>\r\n              <p aria-live=\"polite\" className=\"sr-only\" role=\"status\">\r\n                {message}\r\n              </p>\r\n              {message && (\r\n                <p className={`mt-2 text-sm ${message.includes('Error') || message.includes('Please') ? 'text-red-600 dark:text-red-400' : 'text-green-600 dark:text-green-400'}`} role=\"status\">\r\n                  {message}\r\n                </p>\r\n              )}\r\n            </form>\r\n          ) : (\r\n            <button\r\n              disabled\r\n              className=\"relative flex w-full items-center justify-center rounded-xl bg-neutral-400 px-4 py-3 text-sm font-bold text-white cursor-not-allowed opacity-60\"\r\n            >\r\n              <div className=\"absolute left-0 ml-4\">\r\n                <PlusIcon className=\"h-5\" />\r\n              </div>\r\n              Please select variant\r\n            </button>\r\n          )}\r\n          \r\n          <div className=\"text-xs text-neutral-500\">\r\n            Total: {quote.price} {quote.currency} (delivery included)\r\n          </div>\r\n\r\n          {quote.disclaimer && (\r\n            <div className=\"text-xs text-neutral-500\">{quote.disclaimer}</div>\r\n          )}\r\n        </div>\r\n      ) : selectedAddressId && !loading ? (\r\n        <div className=\"mt-4 text-center text-sm text-neutral-600\">Select delivery address to see pricing</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/p2p/message-widget.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useTransition, useEffect } from 'react';\r\nimport { toast } from 'sonner';\r\nimport { getSellerById } from 'lib/demo/sellers';\r\nimport Image from 'next/image';\r\n\r\ntype Props = {\r\n  sellerId: string;\r\n  productTitle: string;\r\n  productHandle: string;\r\n};\r\n\r\ntype Message = {\r\n  id: string;\r\n  message: string;\r\n  timestamp: Date;\r\n  isSent: boolean;\r\n};\r\n\r\nexport default function MessageWidget({ sellerId, productTitle, productHandle }: Props) {\r\n  const seller = getSellerById(sellerId);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isPending, startTransition] = useTransition();\r\n\r\n  // Load message history when chat opens\r\n  useEffect(() => {\r\n    if (isOpen && sellerId) {\r\n      loadMessages();\r\n    }\r\n  }, [isOpen, sellerId]);\r\n\r\n  const loadMessages = async () => {\r\n    try {\r\n      const response = await fetch(`/api/messages/send?sellerId=${sellerId}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        // Convert to Message format\r\n        const formattedMessages: Message[] = data.map((msg: any) => ({\r\n          id: msg.id,\r\n          message: msg.message,\r\n          timestamp: new Date(msg.timestamp),\r\n          isSent: true\r\n        }));\r\n        setMessages(formattedMessages);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load messages:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    \r\n    if (!message.trim()) {\r\n      return;\r\n    }\r\n\r\n    const newMessage: Message = {\r\n      id: `temp_${Date.now()}`,\r\n      message: message.trim(),\r\n      timestamp: new Date(),\r\n      isSent: true\r\n    };\r\n\r\n    // Optimistic update\r\n    setMessages(prev => [...prev, newMessage]);\r\n    setMessage('');\r\n\r\n    startTransition(async () => {\r\n      try {\r\n        const response = await fetch('/api/messages/send', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            sellerId,\r\n            productHandle,\r\n            productTitle,\r\n            message: newMessage.message\r\n          })\r\n        });\r\n\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          // Update message with real ID\r\n          setMessages(prev => \r\n            prev.map(msg => \r\n              msg.id === newMessage.id \r\n                ? { ...msg, id: result.messageId }\r\n                : msg\r\n            )\r\n          );\r\n        } else {\r\n          // Remove failed message\r\n          setMessages(prev => prev.filter(msg => msg.id !== newMessage.id));\r\n          toast.error('Failed to send message');\r\n        }\r\n      } catch (error) {\r\n        // Remove failed message\r\n        setMessages(prev => prev.filter(msg => msg.id !== newMessage.id));\r\n        toast.error('An error occurred while sending the message');\r\n        console.error('Error:', error);\r\n      }\r\n    });\r\n  };\r\n\r\n  if (!seller) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Floating Chat Button */}\r\n      {!isOpen && (\r\n        <button\r\n          onClick={() => setIsOpen(true)}\r\n          className=\"fixed bottom-6 right-6 z-50 flex items-center gap-2 rounded-full bg-blue-600 px-6 py-4 shadow-lg transition-all hover:bg-blue-700 hover:shadow-xl dark:bg-blue-500 dark:hover:bg-blue-600\"\r\n          aria-label=\"Open chat\"\r\n        >\r\n          <svg className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n          </svg>\r\n          <span className=\"font-semibold text-white\">Chat</span>\r\n        </button>\r\n      )}\r\n\r\n      {/* Chat Window */}\r\n      {isOpen && (\r\n        <div className=\"fixed bottom-6 right-6 z-50 flex h-[500px] w-[380px] flex-col rounded-lg border border-neutral-200 bg-white shadow-2xl dark:border-neutral-700 dark:bg-black\">\r\n          {/* Chat Header */}\r\n          <div className=\"flex items-center gap-3 border-b border-neutral-200 bg-neutral-50 px-4 py-3 dark:border-neutral-700 dark:bg-neutral-900\">\r\n            <div className=\"relative h-10 w-10 flex-shrink-0 overflow-hidden rounded-full\">\r\n              <Image src={seller.avatar} alt={seller.name} fill sizes=\"40px\" className=\"object-cover\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"font-semibold text-neutral-900 dark:text-white\">{seller.name}</div>\r\n              <div className=\"text-xs text-neutral-500 dark:text-neutral-400\">Online</div>\r\n            </div>\r\n            <button\r\n              onClick={() => setIsOpen(false)}\r\n              className=\"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200\"\r\n              aria-label=\"Close chat\"\r\n            >\r\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Messages Area */}\r\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\r\n            {messages.length === 0 ? (\r\n              <div className=\"flex h-full items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-medium text-neutral-900 dark:text-white\">Start a conversation</p>\r\n                  <p className=\"mt-1 text-xs text-neutral-500 dark:text-neutral-400\">\r\n                    Send a message to {seller.name}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              messages.map((msg) => (\r\n                <div key={msg.id} className=\"flex justify-end\">\r\n                  <div className=\"max-w-[80%] rounded-lg bg-blue-600 px-3 py-2 text-sm text-white\">\r\n                    {msg.message}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n\r\n          {/* Message Input */}\r\n          <form onSubmit={handleSubmit} className=\"border-t border-neutral-200 p-3 dark:border-neutral-700\">\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"Type a message...\"\r\n                className=\"flex-1 rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-neutral-600 dark:bg-neutral-900 dark:text-white\"\r\n                disabled={isPending}\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isPending || !message.trim()}\r\n                className=\"rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600\"\r\n                aria-label=\"Send message\"\r\n              >\r\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1210, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/layout/footer-menu.tsx"],"sourcesContent":["'use client';\r\n\r\nimport clsx from 'clsx';\r\nimport { Menu } from 'lib/shopify/types';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function FooterMenuItem({ item }: { item: Menu }) {\r\n  const pathname = usePathname();\r\n  const [active, setActive] = useState(pathname === item.path);\r\n\r\n  useEffect(() => {\r\n    setActive(pathname === item.path);\r\n  }, [pathname, item.path]);\r\n\r\n  return (\r\n    <li>\r\n      <Link\r\n        href={item.path}\r\n        className={clsx(\r\n          'inline-block text-sm underline-offset-4 hover:text-black hover:underline dark:hover:text-neutral-300',\r\n          {\r\n            'text-black dark:text-neutral-300': active\r\n          }\r\n        )}\r\n      >\r\n        {item.title}\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default function FooterMenu({ menu }: { menu: Menu[] }) {\r\n  if (!menu.length) return null;\r\n\r\n  return (\r\n    <nav>\r\n      <ul className=\"flex flex-wrap items-center gap-4 md:gap-6\">\r\n        {menu.map((item: Menu) => {\r\n          return <FooterMenuItem key={item.title} item={item} />;\r\n        })}\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;AACA;;;AANA;;;;;AAQO,SAAS,eAAe,EAAE,IAAI,EAAkB;;IACrD,MAAM,WAAW,IAAA,6PAAW;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kSAAQ,EAAC,aAAa,KAAK,IAAI;IAE3D,IAAA,mSAAS;oCAAC;YACR,UAAU,aAAa,KAAK,IAAI;QAClC;mCAAG;QAAC;QAAU,KAAK,IAAI;KAAC;IAExB,qBACE,sTAAC;kBACC,cAAA,sTAAC,mRAAI;YACH,MAAM,KAAK,IAAI;YACf,WAAW,IAAA,oMAAI,EACb,wGACA;gBACE,oCAAoC;YACtC;sBAGD,KAAK,KAAK;;;;;;;;;;;AAInB;GAvBgB;;QACG,6PAAW;;;KADd;AAyBD,SAAS,WAAW,EAAE,IAAI,EAAoB;IAC3D,IAAI,CAAC,KAAK,MAAM,EAAE,OAAO;IAEzB,qBACE,sTAAC;kBACC,cAAA,sTAAC;YAAG,WAAU;sBACX,KAAK,GAAG,CAAC,CAAC;gBACT,qBAAO,sTAAC;oBAAgC,MAAM;mBAAlB,KAAK,KAAK;;;;;YACxC;;;;;;;;;;;AAIR;MAZwB","debugId":null}},
    {"offset": {"line": 1300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/label.tsx"],"sourcesContent":["import clsx from 'clsx';\r\nimport Price from './price';\r\n\r\nconst Label = ({\r\n  title,\r\n  amount,\r\n  currencyCode,\r\n  position = 'bottom'\r\n}: {\r\n  title: string;\r\n  amount: string;\r\n  currencyCode: string;\r\n  position?: 'bottom' | 'center';\r\n}) => {\r\n  return (\r\n    <div\r\n      className={clsx('absolute bottom-0 left-0 flex w-full px-4 pb-4 @container/label', {\r\n        'lg:px-20 lg:pb-[35%]': position === 'center'\r\n      })}\r\n    >\r\n      <div className=\"flex items-center rounded-full border bg-white/70 p-1 text-xs font-semibold text-black backdrop-blur-md dark:border-neutral-800 dark:bg-black/70 dark:text-white\">\r\n        <h3 className=\"mr-4 line-clamp-2 grow pl-2 leading-none tracking-tight\">{title}</h3>\r\n        <Price\r\n          className=\"flex-none rounded-full bg-blue-600 p-2 text-white\"\r\n          amount={amount}\r\n          currencyCode={currencyCode}\r\n          currencyCodeClassName=\"hidden @[275px]/label:inline\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,QAAQ,CAAC,EACb,KAAK,EACL,MAAM,EACN,YAAY,EACZ,WAAW,QAAQ,EAMpB;IACC,qBACE,sTAAC;QACC,WAAW,IAAA,oMAAI,EAAC,mEAAmE;YACjF,wBAAwB,aAAa;QACvC;kBAEA,cAAA,sTAAC;YAAI,WAAU;;8BACb,sTAAC;oBAAG,WAAU;8BAA2D;;;;;;8BACzE,sTAAC,kIAAK;oBACJ,WAAU;oBACV,QAAQ;oBACR,cAAc;oBACd,uBAAsB;;;;;;;;;;;;;;;;;AAKhC;KA5BM;uCA8BS","debugId":null}},
    {"offset": {"line": 1359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/grid/tile.tsx"],"sourcesContent":["import clsx from 'clsx';\r\nimport Image from 'next/image';\r\nimport Label from '../label';\r\n\r\nexport function GridTileImage({\r\n  isInteractive = true,\r\n  active,\r\n  label,\r\n  ...props\r\n}: {\r\n  isInteractive?: boolean;\r\n  active?: boolean;\r\n  label?: {\r\n    title: string;\r\n    amount: string;\r\n    currencyCode: string;\r\n    position?: 'bottom' | 'center';\r\n  };\r\n} & React.ComponentProps<typeof Image>) {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        'group flex h-full w-full items-center justify-center overflow-hidden rounded-lg border bg-white hover:border-blue-600 dark:bg-black',\r\n        {\r\n          relative: label,\r\n          'border-2 border-blue-600': active,\r\n          'border-neutral-200 dark:border-neutral-800': !active\r\n        }\r\n      )}\r\n    >\r\n      {props.src ? (\r\n        <Image\r\n          className={clsx('relative h-full w-full object-contain', {\r\n            'transition duration-300 ease-in-out group-hover:scale-105': isInteractive\r\n          })}\r\n          {...props}\r\n        />\r\n      ) : null}\r\n      {label ? (\r\n        <Label\r\n          title={label.title}\r\n          amount={label.amount}\r\n          currencyCode={label.currencyCode}\r\n          position={label.position}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEO,SAAS,cAAc,EAC5B,gBAAgB,IAAI,EACpB,MAAM,EACN,KAAK,EACL,GAAG,OAUiC;IACpC,qBACE,sTAAC;QACC,WAAW,IAAA,oMAAI,EACb,uIACA;YACE,UAAU;YACV,4BAA4B;YAC5B,8CAA8C,CAAC;QACjD;;YAGD,MAAM,GAAG,iBACR,sTAAC,oPAAK;gBACJ,WAAW,IAAA,oMAAI,EAAC,yCAAyC;oBACvD,6DAA6D;gBAC/D;gBACC,GAAG,KAAK;;;;;uBAET;YACH,sBACC,sTAAC,kIAAK;gBACJ,OAAO,MAAM,KAAK;gBAClB,QAAQ,MAAM,MAAM;gBACpB,cAAc,MAAM,YAAY;gBAChC,UAAU,MAAM,QAAQ;;;;;uBAExB;;;;;;;AAGV;KA5CgB","debugId":null}},
    {"offset": {"line": 1416, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/product/gallery.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ArrowLeftIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\r\nimport { GridTileImage } from 'components/grid/tile';\r\nimport { useProduct, useUpdateURL } from 'components/product/product-context';\r\nimport Image from 'next/image';\r\n\r\nexport function Gallery({ images }: { images: { src: string; altText: string }[] }) {\r\n  const { state, updateImage } = useProduct();\r\n  const updateURL = useUpdateURL();\r\n  const imageIndex = state.image ? parseInt(state.image) : 0;\r\n\r\n  const nextImageIndex = imageIndex + 1 < images.length ? imageIndex + 1 : 0;\r\n  const previousImageIndex = imageIndex === 0 ? images.length - 1 : imageIndex - 1;\r\n\r\n  const buttonClassName =\r\n    'h-full px-6 transition-all ease-in-out hover:scale-110 hover:text-black dark:hover:text-white flex items-center justify-center';\r\n\r\n  return (\r\n    <form>\r\n      <div className=\"relative aspect-square w-full max-h-[550px] overflow-hidden\">\r\n        {images[imageIndex] && (\r\n          <Image\r\n            className=\"h-full w-full object-contain\"\r\n            fill\r\n            sizes=\"(min-width: 1024px) 66vw, 100vw\"\r\n            alt={images[imageIndex]?.altText as string}\r\n            src={images[imageIndex]?.src as string}\r\n            priority={true}\r\n          />\r\n        )}\r\n\r\n        {images.length > 1 ? (\r\n          <div className=\"absolute bottom-[15%] flex w-full justify-center\">\r\n            <div className=\"mx-auto flex h-11 items-center rounded-full border border-white bg-neutral-50/80 text-neutral-500 backdrop-blur-sm dark:border-black dark:bg-neutral-900/80\">\r\n              <button\r\n                formAction={() => {\r\n                  const newState = updateImage(previousImageIndex.toString());\r\n                  updateURL(newState);\r\n                }}\r\n                aria-label=\"Previous product image\"\r\n                className={buttonClassName}\r\n              >\r\n                <ArrowLeftIcon className=\"h-5\" />\r\n              </button>\r\n              <div className=\"mx-1 h-6 w-px bg-neutral-500\"></div>\r\n              <button\r\n                formAction={() => {\r\n                  const newState = updateImage(nextImageIndex.toString());\r\n                  updateURL(newState);\r\n                }}\r\n                aria-label=\"Next product image\"\r\n                className={buttonClassName}\r\n              >\r\n                <ArrowRightIcon className=\"h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n\r\n      {images.length > 1 ? (\r\n        <ul className=\"my-12 flex items-center flex-wrap justify-center gap-2 py-1 lg:mb-0\">\r\n          {images.map((image, index) => {\r\n            const isActive = index === imageIndex;\r\n\r\n            return (\r\n              <li key={`${image.src}-${index}`} className=\"h-20 w-20\">\r\n                <button\r\n                  formAction={() => {\r\n                    const newState = updateImage(index.toString());\r\n                    updateURL(newState);\r\n                  }}\r\n                  aria-label=\"Select product image\"\r\n                  className=\"h-full w-full\"\r\n                >\r\n                  <GridTileImage\r\n                    alt={image.altText}\r\n                    src={image.src}\r\n                    width={80}\r\n                    height={80}\r\n                    active={isActive}\r\n                  />\r\n                </button>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      ) : null}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS,QAAQ,EAAE,MAAM,EAAkD;;IAChF,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,6JAAU;IACzC,MAAM,YAAY,IAAA,+JAAY;IAC9B,MAAM,aAAa,MAAM,KAAK,GAAG,SAAS,MAAM,KAAK,IAAI;IAEzD,MAAM,iBAAiB,aAAa,IAAI,OAAO,MAAM,GAAG,aAAa,IAAI;IACzE,MAAM,qBAAqB,eAAe,IAAI,OAAO,MAAM,GAAG,IAAI,aAAa;IAE/E,MAAM,kBACJ;IAEF,qBACE,sTAAC;;0BACC,sTAAC;gBAAI,WAAU;;oBACZ,MAAM,CAAC,WAAW,kBACjB,sTAAC,oPAAK;wBACJ,WAAU;wBACV,IAAI;wBACJ,OAAM;wBACN,KAAK,MAAM,CAAC,WAAW,EAAE;wBACzB,KAAK,MAAM,CAAC,WAAW,EAAE;wBACzB,UAAU;;;;;;oBAIb,OAAO,MAAM,GAAG,kBACf,sTAAC;wBAAI,WAAU;kCACb,cAAA,sTAAC;4BAAI,WAAU;;8CACb,sTAAC;oCACC,YAAY;wCACV,MAAM,WAAW,YAAY,mBAAmB,QAAQ;wCACxD,UAAU;oCACZ;oCACA,cAAW;oCACX,WAAW;8CAEX,cAAA,sTAAC,oUAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,sTAAC;oCAAI,WAAU;;;;;;8CACf,sTAAC;oCACC,YAAY;wCACV,MAAM,WAAW,YAAY,eAAe,QAAQ;wCACpD,UAAU;oCACZ;oCACA,cAAW;oCACX,WAAW;8CAEX,cAAA,sTAAC,uUAAc;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;+BAI9B;;;;;;;YAGL,OAAO,MAAM,GAAG,kBACf,sTAAC;gBAAG,WAAU;0BACX,OAAO,GAAG,CAAC,CAAC,OAAO;oBAClB,MAAM,WAAW,UAAU;oBAE3B,qBACE,sTAAC;wBAAiC,WAAU;kCAC1C,cAAA,sTAAC;4BACC,YAAY;gCACV,MAAM,WAAW,YAAY,MAAM,QAAQ;gCAC3C,UAAU;4BACZ;4BACA,cAAW;4BACX,WAAU;sCAEV,cAAA,sTAAC,+IAAa;gCACZ,KAAK,MAAM,OAAO;gCAClB,KAAK,MAAM,GAAG;gCACd,OAAO;gCACP,QAAQ;gCACR,QAAQ;;;;;;;;;;;uBAdL,GAAG,MAAM,GAAG,CAAC,CAAC,EAAE,OAAO;;;;;gBAmBpC;;;;;uBAEA;;;;;;;AAGV;GApFgB;;QACiB,6JAAU;QACvB,+JAAY;;;KAFhB","debugId":null}},
    {"offset": {"line": 1588, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/CursorProjects/Rokets_clsfd/commerce/components/product/variant-selector.tsx"],"sourcesContent":["'use client';\r\n\r\nimport clsx from 'clsx';\r\nimport { useProduct, useUpdateURL } from 'components/product/product-context';\r\nimport { ProductOption, ProductVariant } from 'lib/shopify/types';\r\n\r\ntype Combination = {\r\n  id: string;\r\n  availableForSale: boolean;\r\n  [key: string]: string | boolean;\r\n};\r\n\r\nexport function VariantSelector({\r\n  options,\r\n  variants\r\n}: {\r\n  options: ProductOption[];\r\n  variants: ProductVariant[];\r\n}) {\r\n  const { state, updateOption } = useProduct();\r\n  const updateURL = useUpdateURL();\r\n  const hasNoOptionsOrJustOneOption =\r\n    !options.length || (options.length === 1 && options[0]?.values.length === 1);\r\n\r\n  if (hasNoOptionsOrJustOneOption) {\r\n    return null;\r\n  }\r\n\r\n  const combinations: Combination[] = variants.map((variant) => ({\r\n    id: variant.id,\r\n    availableForSale: variant.availableForSale,\r\n    ...variant.selectedOptions.reduce(\r\n      (accumulator, option) => ({ ...accumulator, [option.name.toLowerCase()]: option.value }),\r\n      {}\r\n    )\r\n  }));\r\n\r\n  return options.map((option) => (\r\n    <form key={option.id}>\r\n      <dl className=\"mb-8\">\r\n        <dt className=\"mb-4 text-sm uppercase tracking-wide\">{option.name}</dt>\r\n        <dd className=\"flex flex-wrap gap-3\">\r\n          {option.values.map((value) => {\r\n            const optionNameLowerCase = option.name.toLowerCase();\r\n\r\n            // Base option params on current selectedOptions so we can preserve any other param state.\r\n            const optionParams = { ...state, [optionNameLowerCase]: value };\r\n\r\n            // Filter out invalid options and check if the option combination is available for sale.\r\n            const filtered = Object.entries(optionParams).filter(([key, value]) =>\r\n              options.find(\r\n                (option) => option.name.toLowerCase() === key && option.values.includes(value)\r\n              )\r\n            );\r\n            const isAvailableForSale = combinations.find((combination) =>\r\n              filtered.every(\r\n                ([key, value]) => combination[key] === value && combination.availableForSale\r\n              )\r\n            );\r\n\r\n            // The option is active if it's in the selected options.\r\n            const isActive = state[optionNameLowerCase] === value;\r\n\r\n            return (\r\n              <button\r\n                formAction={() => {\r\n                  const newState = updateOption(optionNameLowerCase, value);\r\n                  updateURL(newState);\r\n                }}\r\n                key={value}\r\n                aria-disabled={!isAvailableForSale}\r\n                disabled={!isAvailableForSale}\r\n                title={`${option.name} ${value}${!isAvailableForSale ? ' (Out of Stock)' : ''}`}\r\n                className={clsx(\r\n                  'flex min-w-[48px] items-center justify-center rounded-full border bg-neutral-100 px-2 py-1 text-sm dark:border-neutral-800 dark:bg-neutral-900',\r\n                  {\r\n                    'cursor-default ring-2 ring-blue-600': isActive,\r\n                    'ring-1 ring-transparent transition duration-300 ease-in-out hover:ring-blue-600':\r\n                      !isActive && isAvailableForSale,\r\n                    'relative z-10 cursor-not-allowed overflow-hidden bg-neutral-100 text-neutral-500 ring-1 ring-neutral-300 before:absolute before:inset-x-0 before:-z-10 before:h-px before:-rotate-45 before:bg-neutral-300 before:transition-transform dark:bg-neutral-900 dark:text-neutral-400 dark:ring-neutral-700 dark:before:bg-neutral-700':\r\n                      !isAvailableForSale\r\n                  }\r\n                )}\r\n              >\r\n                {value}\r\n              </button>\r\n            );\r\n          })}\r\n        </dd>\r\n      </dl>\r\n    </form>\r\n  ));\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYO,SAAS,gBAAgB,EAC9B,OAAO,EACP,QAAQ,EAIT;;IACC,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,IAAA,6JAAU;IAC1C,MAAM,YAAY,IAAA,+JAAY;IAC9B,MAAM,8BACJ,CAAC,QAAQ,MAAM,IAAK,QAAQ,MAAM,KAAK,KAAK,OAAO,CAAC,EAAE,EAAE,OAAO,WAAW;IAE5E,IAAI,6BAA6B;QAC/B,OAAO;IACT;IAEA,MAAM,eAA8B,SAAS,GAAG,CAAC,CAAC,UAAY,CAAC;YAC7D,IAAI,QAAQ,EAAE;YACd,kBAAkB,QAAQ,gBAAgB;YAC1C,GAAG,QAAQ,eAAe,CAAC,MAAM,CAC/B,CAAC,aAAa,SAAW,CAAC;oBAAE,GAAG,WAAW;oBAAE,CAAC,OAAO,IAAI,CAAC,WAAW,GAAG,EAAE,OAAO,KAAK;gBAAC,CAAC,GACvF,CAAC,EACF;QACH,CAAC;IAED,OAAO,QAAQ,GAAG,CAAC,CAAC,uBAClB,sTAAC;sBACC,cAAA,sTAAC;gBAAG,WAAU;;kCACZ,sTAAC;wBAAG,WAAU;kCAAwC,OAAO,IAAI;;;;;;kCACjE,sTAAC;wBAAG,WAAU;kCACX,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;4BAClB,MAAM,sBAAsB,OAAO,IAAI,CAAC,WAAW;4BAEnD,0FAA0F;4BAC1F,MAAM,eAAe;gCAAE,GAAG,KAAK;gCAAE,CAAC,oBAAoB,EAAE;4BAAM;4BAE9D,wFAAwF;4BACxF,MAAM,WAAW,OAAO,OAAO,CAAC,cAAc,MAAM,CAAC,CAAC,CAAC,KAAK,MAAM,GAChE,QAAQ,IAAI,CACV,CAAC,SAAW,OAAO,IAAI,CAAC,WAAW,OAAO,OAAO,OAAO,MAAM,CAAC,QAAQ,CAAC;4BAG5E,MAAM,qBAAqB,aAAa,IAAI,CAAC,CAAC,cAC5C,SAAS,KAAK,CACZ,CAAC,CAAC,KAAK,MAAM,GAAK,WAAW,CAAC,IAAI,KAAK,SAAS,YAAY,gBAAgB;4BAIhF,wDAAwD;4BACxD,MAAM,WAAW,KAAK,CAAC,oBAAoB,KAAK;4BAEhD,qBACE,sTAAC;gCACC,YAAY;oCACV,MAAM,WAAW,aAAa,qBAAqB;oCACnD,UAAU;gCACZ;gCAEA,iBAAe,CAAC;gCAChB,UAAU,CAAC;gCACX,OAAO,GAAG,OAAO,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,qBAAqB,oBAAoB,IAAI;gCAC/E,WAAW,IAAA,oMAAI,EACb,kJACA;oCACE,uCAAuC;oCACvC,mFACE,CAAC,YAAY;oCACf,qUACE,CAAC;gCACL;0CAGD;+BAfI;;;;;wBAkBX;;;;;;;;;;;;WAjDK,OAAO,EAAE;;;;;AAsDxB;GAhFgB;;QAOkB,6JAAU;QACxB,+JAAY;;;KARhB","debugId":null}}]
}