module.exports=[67054,a=>{"use strict";var b=a.i(18779),c=a.i(28031),d=a.i(6274);let e=(0,d.createContext)(void 0);function f({children:a}){let f=(0,c.useSearchParams)(),[g,h]=(0,d.useOptimistic)((()=>{let a={};for(let[b,c]of f.entries())a[b]=c;return a})(),(a,b)=>({...a,...b})),i=(a,b)=>{let c={[a]:b};return h(c),{...g,...c}},j=a=>{let b={image:a};return h(b),{...g,...b}},k=(0,d.useMemo)(()=>({state:g,updateOption:i,updateImage:j}),[g]);return(0,b.jsx)(e.Provider,{value:k,children:a})}function g(){let a=(0,d.useContext)(e);if(void 0===a)throw Error("useProduct must be used within a ProductProvider");return a}function h(){let a=(0,c.useRouter)();return b=>{let c=new URLSearchParams(window.location.search);Object.entries(b).forEach(([a,b])=>{c.set(a,b)}),a.push(`?${c.toString()}`,{scroll:!1})}}a.s(["ProductProvider",()=>f,"useProduct",()=>g,"useUpdateURL",()=>h])},16019,a=>{"use strict";var b=a.i(18779),c=a.i(6274),d=a.i(28031),e=a.i(74197),f=a.i(88272),g=(0,f.createServerReference)("600cce64c753d579b67e3785ef8089ac54f88fde39",f.callServer,void 0,f.findSourceMapURL,"addItem"),h=a.i(68298),i=a.i(67054),j=a.i(75922);function k(a){let f=(0,j.getSellerById)(a.sellerId),k=(0,d.useRouter)(),{addCartItem:l}=(0,h.useCart)(),{state:m}=(0,i.useProduct)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(f?.address||f?.location||"Dubai"),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/account/addresses");if(a.ok){let b=await a.json();s(b);let c=b.find(a=>a.isDefault);c?u(c.id):b.length>0&&u(b[0].id)}}catch(a){}finally{C(!1)}}()},[]);let D=r.find(a=>a.id===t),E=D?`${D.addressLine1}${D.addressLine2?", "+D.addressLine2:""}, ${D.city}${D.state?", "+D.state:""} ${D.postalCode}, ${D.country}`:"",F=a.product.variants.find(a=>a.selectedOptions.every(a=>a.value===m[a.name.toLowerCase()])),G=1===a.product.variants.length?a.product.variants[0]?.id:void 0,H=F?.id||G,I=a.product.variants.find(a=>a.id===H);async function J(){if(!E.trim())return void y(null);A(!0);try{let b=await fetch("/api/rockets/quote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listingId:a.listingId,pickupArea:p,dropoffArea:E,declaredValueAed:a.declaredValueAed??300,weightKg:a.weightKg??3,fragile:a.fragile??!1})}),c=await b.json();y(c)}catch(a){}finally{A(!1)}}return(0,c.useEffect)(()=>{if(!t||B)return void y(null);let a=setTimeout(()=>{E.trim()?J():y(null)},500);return()=>clearTimeout(a)},[t,E,p,a.listingId,a.declaredValueAed,a.weightKg,a.fragile,B]),(0,b.jsxs)("div",{className:"mt-6 rounded-2xl border border-neutral-200 p-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"ðŸšš Delivery by Rockets"}),(0,b.jsx)("div",{className:"text-xs text-neutral-600",children:"Peer-to-peer item pickup â†’ delivery to buyer"})]})}),(0,b.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsxs)("span",{className:"text-xs text-neutral-600",children:["Delivery Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),B?(0,b.jsx)("div",{className:"rounded-lg border px-3 py-2 text-sm bg-neutral-50 dark:bg-neutral-800 text-neutral-500",children:"Loading addresses..."}):0===r.length?(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"rounded-lg border px-3 py-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200",children:["No addresses saved. ",(0,b.jsx)("a",{href:"/account#addresses",className:"underline",children:"Add address"})]})}):(0,b.jsxs)("select",{className:"rounded-lg border border-neutral-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-neutral-700 dark:bg-black dark:text-white",value:t,onChange:a=>u(a.target.value),disabled:z,required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select delivery address"}),r.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.label," ",a.isDefault&&"(Default)"," - ",a.addressLine1,", ",a.city]},a.id))]}),D&&(0,b.jsxs)("div",{className:"mt-1 rounded-lg border px-3 py-2 text-xs bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400",children:[D.fullName," Â· ",D.phone,(0,b.jsx)("br",{}),D.addressLine1,D.addressLine2&&`, ${D.addressLine2}`,(0,b.jsx)("br",{}),D.city,D.state&&`, ${D.state}`," ",D.postalCode,", ",D.country]})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsxs)("span",{className:"text-xs text-neutral-600",children:["Delivery Time Windows ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"space-y-2",children:[{value:"morning",label:"Morning (9:00 - 12:00)"},{value:"afternoon",label:"Afternoon (12:00 - 17:00)"},{value:"evening",label:"Evening (17:00 - 21:00)"}].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:v.includes(a.value),onChange:()=>{var b;return b=a.value,void w(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},disabled:z,className:"rounded border-neutral-300 text-blue-600 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm",children:a.label})]},a.value))}),0===v.length&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Please select at least one time window"})]})]}),z&&t?(0,b.jsx)("div",{className:"mt-4 text-center text-sm text-neutral-600",children:"Calculating delivery cost..."}):x?(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsx)("div",{className:"rounded-xl border p-4 bg-neutral-50 dark:bg-neutral-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Delivery Cost"}),(0,b.jsxs)("div",{className:"text-xs text-neutral-600",children:["ETA: ",x.eta_hours||"24-72","h Â· Insurance: ",x.insurance_included?"Included":"Not included"]})]}),(0,b.jsxs)("div",{className:"text-lg font-bold",children:[x.price," ",x.currency]})]})}),I&&H?(0,b.jsxs)("form",{action:async()=>{if(!t||0===v.length)return void o("Please select delivery address and at least one time window");try{let b=Number(x.price)||0;I&&l(I,a.product,b);let c=new FormData;c.set("variantId",H),c.set("deliveryPrice",b.toString());let d=await g(null,c);k.refresh(),o(d||"Item added to cart")}catch(a){o("Error adding item to cart")}},children:[(0,b.jsxs)("button",{type:"submit",className:"relative flex w-full items-center justify-center rounded-xl bg-blue-600 px-4 py-3 text-sm font-bold text-white transition-colors hover:bg-blue-700 disabled:opacity-60 dark:bg-blue-500 dark:hover:bg-blue-600",disabled:z||!H||!a.product.availableForSale||!t||0===v.length,children:[(0,b.jsx)("div",{className:"absolute left-0 ml-4",children:(0,b.jsx)(e.PlusIcon,{className:"h-5"})}),"Add to Cart with Delivery"]}),(0,b.jsx)("p",{"aria-live":"polite",className:"sr-only",role:"status",children:n}),n&&(0,b.jsx)("p",{className:`mt-2 text-sm ${n.includes("Error")||n.includes("Please")?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,role:"status",children:n})]}):(0,b.jsxs)("button",{disabled:!0,className:"relative flex w-full items-center justify-center rounded-xl bg-neutral-400 px-4 py-3 text-sm font-bold text-white cursor-not-allowed opacity-60",children:[(0,b.jsx)("div",{className:"absolute left-0 ml-4",children:(0,b.jsx)(e.PlusIcon,{className:"h-5"})}),"Please select variant"]}),(0,b.jsxs)("div",{className:"text-xs text-neutral-500",children:["Total: ",x.price," ",x.currency," (delivery included)"]}),x.disclaimer&&(0,b.jsx)("div",{className:"text-xs text-neutral-500",children:x.disclaimer})]}):t&&!z?(0,b.jsx)("div",{className:"mt-4 text-center text-sm text-neutral-600",children:"Select delivery address to see pricing"}):null]})}a.s(["default",()=>k],16019)},42432,a=>{"use strict";var b=a.i(18779),c=a.i(6274),d=a.i(97599),e=a.i(75922),f=a.i(19888);function g({sellerId:a,productTitle:g,productHandle:h}){let i=(0,e.getSellerById)(a),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useTransition)();(0,c.useEffect)(()=>{j&&a&&r()},[j,a]);let r=async()=>{try{let b=await fetch(`/api/messages/send?sellerId=${a}`);if(b.ok){let a=(await b.json()).map(a=>({id:a.id,message:a.message,timestamp:new Date(a.timestamp),isSent:!0}));o(a)}}catch(a){}},s=async b=>{if(b.preventDefault(),!l.trim())return;let c={id:`temp_${Date.now()}`,message:l.trim(),timestamp:new Date,isSent:!0};o(a=>[...a,c]),m(""),q(async()=>{try{let b=await fetch("/api/messages/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sellerId:a,productHandle:h,productTitle:g,message:c.message})});if(b.ok){let a=await b.json();o(b=>b.map(b=>b.id===c.id?{...b,id:a.messageId}:b))}else o(a=>a.filter(a=>a.id!==c.id)),d.toast.error("Failed to send message")}catch(a){o(a=>a.filter(a=>a.id!==c.id)),d.toast.error("An error occurred while sending the message")}})};return i?(0,b.jsxs)(b.Fragment,{children:[!j&&(0,b.jsxs)("button",{onClick:()=>k(!0),className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 rounded-full bg-blue-600 px-6 py-4 shadow-lg transition-all hover:bg-blue-700 hover:shadow-xl dark:bg-blue-500 dark:hover:bg-blue-600","aria-label":"Open chat",children:[(0,b.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,b.jsx)("span",{className:"font-semibold text-white",children:"Chat"})]}),j&&(0,b.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex h-[500px] w-[380px] flex-col rounded-lg border border-neutral-200 bg-white shadow-2xl dark:border-neutral-700 dark:bg-black",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 border-b border-neutral-200 bg-neutral-50 px-4 py-3 dark:border-neutral-700 dark:bg-neutral-900",children:[(0,b.jsx)("div",{className:"relative h-10 w-10 flex-shrink-0 overflow-hidden rounded-full",children:(0,b.jsx)(f.default,{src:i.avatar,alt:i.name,fill:!0,sizes:"40px",className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"font-semibold text-neutral-900 dark:text-white",children:i.name}),(0,b.jsx)("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Online"})]}),(0,b.jsx)("button",{onClick:()=>k(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200","aria-label":"Close chat",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===n.length?(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:"Start a conversation"}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:["Send a message to ",i.name]})]})}):n.map(a=>(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("div",{className:"max-w-[80%] rounded-lg bg-blue-600 px-3 py-2 text-sm text-white",children:a.message})},a.id))}),(0,b.jsx)("form",{onSubmit:s,className:"border-t border-neutral-200 p-3 dark:border-neutral-700",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Type a message...",className:"flex-1 rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-neutral-600 dark:bg-neutral-900 dark:text-white",disabled:p}),(0,b.jsx)("button",{type:"submit",disabled:p||!l.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600","aria-label":"Send message",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]}):null}a.s(["default",()=>g])},22136,a=>{"use strict";var b=a.i(18779),c=a.i(6274);let d=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}),e=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))});var f=a.i(39337),g=a.i(19888),h=a.i(73709);let i=({title:a,amount:c,currencyCode:d,position:e="bottom"})=>(0,b.jsx)("div",{className:(0,f.default)("absolute bottom-0 left-0 flex w-full px-4 pb-4 @container/label",{"lg:px-20 lg:pb-[35%]":"center"===e}),children:(0,b.jsxs)("div",{className:"flex items-center rounded-full border bg-white/70 p-1 text-xs font-semibold text-black backdrop-blur-md dark:border-neutral-800 dark:bg-black/70 dark:text-white",children:[(0,b.jsx)("h3",{className:"mr-4 line-clamp-2 grow pl-2 leading-none tracking-tight",children:a}),(0,b.jsx)(h.default,{className:"flex-none rounded-full bg-blue-600 p-2 text-white",amount:c,currencyCode:d,currencyCodeClassName:"hidden @[275px]/label:inline"})]})});function j({isInteractive:a=!0,active:c,label:d,...e}){return(0,b.jsxs)("div",{className:(0,f.default)("group flex h-full w-full items-center justify-center overflow-hidden rounded-lg border bg-white hover:border-blue-600 dark:bg-black",{relative:d,"border-2 border-blue-600":c,"border-neutral-200 dark:border-neutral-800":!c}),children:[e.src?(0,b.jsx)(g.default,{className:(0,f.default)("relative h-full w-full object-contain",{"transition duration-300 ease-in-out group-hover:scale-105":a}),...e}):null,d?(0,b.jsx)(i,{title:d.title,amount:d.amount,currencyCode:d.currencyCode,position:d.position}):null]})}var k=a.i(67054);function l({images:a}){let{state:c,updateImage:f}=(0,k.useProduct)(),h=(0,k.useUpdateURL)(),i=c.image?parseInt(c.image):0,l=i+1<a.length?i+1:0,m=0===i?a.length-1:i-1,n="h-full px-6 transition-all ease-in-out hover:scale-110 hover:text-black dark:hover:text-white flex items-center justify-center";return(0,b.jsxs)("form",{children:[(0,b.jsxs)("div",{className:"relative aspect-square w-full max-h-[550px] overflow-hidden",children:[a[i]&&(0,b.jsx)(g.default,{className:"h-full w-full object-contain",fill:!0,sizes:"(min-width: 1024px) 66vw, 100vw",alt:a[i]?.altText,src:a[i]?.src,priority:!0}),a.length>1?(0,b.jsx)("div",{className:"absolute bottom-[15%] flex w-full justify-center",children:(0,b.jsxs)("div",{className:"mx-auto flex h-11 items-center rounded-full border border-white bg-neutral-50/80 text-neutral-500 backdrop-blur-sm dark:border-black dark:bg-neutral-900/80",children:[(0,b.jsx)("button",{formAction:()=>{h(f(m.toString()))},"aria-label":"Previous product image",className:n,children:(0,b.jsx)(d,{className:"h-5"})}),(0,b.jsx)("div",{className:"mx-1 h-6 w-px bg-neutral-500"}),(0,b.jsx)("button",{formAction:()=>{h(f(l.toString()))},"aria-label":"Next product image",className:n,children:(0,b.jsx)(e,{className:"h-5"})})]})}):null]}),a.length>1?(0,b.jsx)("ul",{className:"my-12 flex items-center flex-wrap justify-center gap-2 py-1 lg:mb-0",children:a.map((a,c)=>{let d=c===i;return(0,b.jsx)("li",{className:"h-20 w-20",children:(0,b.jsx)("button",{formAction:()=>{h(f(c.toString()))},"aria-label":"Select product image",className:"h-full w-full",children:(0,b.jsx)(j,{alt:a.altText,src:a.src,width:80,height:80,active:d})})},`${a.src}-${c}`)})}):null]})}a.s(["Gallery",()=>l],22136)},20393,a=>{"use strict";var b=a.i(18779),c=a.i(39337),d=a.i(67054);function e({options:a,variants:e}){let{state:f,updateOption:g}=(0,d.useProduct)(),h=(0,d.useUpdateURL)();if(!a.length||1===a.length&&a[0]?.values.length===1)return null;let i=e.map(a=>({id:a.id,availableForSale:a.availableForSale,...a.selectedOptions.reduce((a,b)=>({...a,[b.name.toLowerCase()]:b.value}),{})}));return a.map(d=>(0,b.jsx)("form",{children:(0,b.jsxs)("dl",{className:"mb-8",children:[(0,b.jsx)("dt",{className:"mb-4 text-sm uppercase tracking-wide",children:d.name}),(0,b.jsx)("dd",{className:"flex flex-wrap gap-3",children:d.values.map(e=>{let j=d.name.toLowerCase(),k=Object.entries({...f,[j]:e}).filter(([b,c])=>a.find(a=>a.name.toLowerCase()===b&&a.values.includes(c))),l=i.find(a=>k.every(([b,c])=>a[b]===c&&a.availableForSale)),m=f[j]===e;return(0,b.jsx)("button",{formAction:()=>{h(g(j,e))},"aria-disabled":!l,disabled:!l,title:`${d.name} ${e}${!l?" (Out of Stock)":""}`,className:(0,c.default)("flex min-w-[48px] items-center justify-center rounded-full border bg-neutral-100 px-2 py-1 text-sm dark:border-neutral-800 dark:bg-neutral-900",{"cursor-default ring-2 ring-blue-600":m,"ring-1 ring-transparent transition duration-300 ease-in-out hover:ring-blue-600":!m&&l,"relative z-10 cursor-not-allowed overflow-hidden bg-neutral-100 text-neutral-500 ring-1 ring-neutral-300 before:absolute before:inset-x-0 before:-z-10 before:h-px before:-rotate-45 before:bg-neutral-300 before:transition-transform dark:bg-neutral-900 dark:text-neutral-400 dark:ring-neutral-700 dark:before:bg-neutral-700":!l}),children:e},e)})})]})},d.id))}a.s(["VariantSelector",()=>e])}];

//# sourceMappingURL=components_cdc84264._.js.map