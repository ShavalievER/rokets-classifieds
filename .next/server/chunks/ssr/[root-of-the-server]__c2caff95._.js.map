{"version":3,"sources":["turbopack:///[project]/components/classified/product-card.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/components/layout/product-grid-items.tsx","turbopack:///[project]/components/layout/pagination.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/search/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/classified/product-card.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/classified/product-card.tsx\",\n    \"default\",\n);\n","import Grid from 'components/grid';\r\nimport { Product } from 'lib/shopify/types';\r\nimport ClassifiedProductCard from 'components/classified/product-card';\r\n\r\nexport default function ProductGridItems({ products }: { products: Product[] }) {\r\n  return (\r\n    <>\r\n      {products.map((product) => (\r\n        <Grid.Item key={product.handle} className=\"animate-fadeIn\">\r\n          <ClassifiedProductCard product={product} />\r\n        </Grid.Item>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/layout/pagination.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/pagination.tsx\",\n    \"default\",\n);\n","import Grid from 'components/grid';\r\nimport ProductGridItems from 'components/layout/product-grid-items';\r\nimport Pagination from 'components/layout/pagination';\r\nimport { defaultSort, sorting } from 'lib/constants';\r\nimport { getProducts } from 'lib/shopify';\r\nimport { Suspense } from 'react';\r\n\r\nexport const metadata = {\r\n  title: 'Search',\r\n  description: 'Search for products in the store.'\r\n};\r\n\r\nconst ITEMS_PER_PAGE = 24;\r\n\r\nexport default async function SearchPage(props: {\r\n  searchParams?: Promise<{ [key: string]: string | string[] | undefined }>;\r\n}) {\r\n  const searchParams = await props.searchParams;\r\n  const { sort, q: searchValue, page } = searchParams as { [key: string]: string };\r\n  const { sortKey, reverse } = sorting.find((item) => item.slug === sort) || defaultSort;\r\n\r\n  // Get current page (default to 1)\r\n  const currentPage = page ? parseInt(page, 10) : 1;\r\n  const validPage = currentPage > 0 && !isNaN(currentPage) ? currentPage : 1;\r\n\r\n  // Get all products\r\n  const allProducts = await getProducts({ sortKey, reverse, query: searchValue });\r\n  \r\n  // Calculate pagination\r\n  const totalItems = allProducts.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / ITEMS_PER_PAGE));\r\n  \r\n  // Ensure valid page is within bounds\r\n  const finalPage = Math.min(Math.max(1, validPage), totalPages);\r\n  \r\n  const startIndex = (finalPage - 1) * ITEMS_PER_PAGE;\r\n  const endIndex = startIndex + ITEMS_PER_PAGE;\r\n  const paginatedProducts = allProducts.slice(startIndex, endIndex);\r\n\r\n  const resultsText = totalItems !== 1 ? 'results' : 'result';\r\n\r\n  return (\r\n    <>\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-neutral-900 dark:text-white\">\r\n          {searchValue ? `Search Results` : 'All Categories'}\r\n        </h1>\r\n        {searchValue ? (\r\n          <p className=\"mt-2 text-sm text-neutral-500 dark:text-neutral-400\">\r\n            {totalItems === 0\r\n              ? `No results found for \"${searchValue}\"`\r\n              : `${totalItems} ${resultsText} found for \"${searchValue}\"`}\r\n          </p>\r\n        ) : (\r\n          <p className=\"mt-2 text-sm text-neutral-500 dark:text-neutral-400\">\r\n            {totalItems} {totalItems !== 1 ? 'listings' : 'listing'} available\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Products Grid */}\r\n      {paginatedProducts.length > 0 ? (\r\n        <>\r\n          <Grid className=\"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n            <ProductGridItems products={paginatedProducts} />\r\n          </Grid>\r\n          \r\n          {/* Pagination */}\r\n          <Suspense fallback={null}>\r\n            <Pagination\r\n              currentPage={finalPage}\r\n              totalPages={totalPages}\r\n              totalItems={totalItems}\r\n              itemsPerPage={ITEMS_PER_PAGE}\r\n            />\r\n          </Suspense>\r\n        </>\r\n      ) : (\r\n        <div className=\"py-12 text-center\">\r\n          <p className=\"text-lg text-neutral-600 dark:text-neutral-400\">No listings found</p>\r\n          <p className=\"mt-2 text-sm text-neutral-500 dark:text-neutral-500\">\r\n            {searchValue\r\n              ? 'Try adjusting your search terms'\r\n              : 'Try adjusting your filters or browse categories'}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0,2]}