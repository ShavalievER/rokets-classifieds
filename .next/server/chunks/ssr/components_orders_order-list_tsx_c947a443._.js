module.exports=[90163,a=>{"use strict";var b=a.i(18779),c=a.i(89303),d=a.i(19888),e=a.i(6274),f=a.i(17001),g=a.i(73045),h=a.i(16645);function i({order:a,isOpen:c,onClose:d}){let i=(0,e.useRef)(null),j=(0,e.useRef)(null),k=(0,e.useRef)(!1),l=a.tracking?.route;return((0,e.useEffect)(()=>{if(c&&l&&i.current){if(window.L&&k.current)return void a();if(!document.querySelector('link[href*="leaflet"]')){let a=document.createElement("link");a.rel="stylesheet",a.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",a.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",a.crossOrigin="",document.head.appendChild(a)}if(window.L)k.current=!0,a();else{let b=document.createElement("script");b.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",b.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",b.crossOrigin="",b.onload=()=>{k.current=!0,a()},document.body.appendChild(b)}return()=>{j.current&&(j.current.remove(),j.current=null)}}function a(){if(!i.current||!window.L||!l)return;j.current&&(j.current.remove(),j.current=null);let a=window.L,b=(l.pickup.lat+l.delivery.lat)/2,c=(l.pickup.lng+l.delivery.lng)/2,d=a.map(i.current,{zoomControl:!0,scrollWheelZoom:!0}).setView([b,c],12);j.current=d,a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}).addTo(d);let e=[l.pickup,...l.waypoints||[],l.delivery],f=e.map(a=>[a.lat,a.lng]);if(a.polyline(f,{color:"#3b82f6",weight:4,opacity:.7}).addTo(d),e.forEach((b,c)=>{let f="#3b82f6";0===c?f="#10b981":c===e.length-1&&(f="#ef4444");let g=a.divIcon({className:"custom-marker",html:`<div style="
            background-color: ${f};
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
          "></div>`,iconSize:[20,20],iconAnchor:[10,10]});a.marker([b.lat,b.lng],{icon:g}).addTo(d).bindPopup(`<strong>${b.label}</strong>${b.timestamp?`<br><small>${new Date(b.timestamp).toLocaleTimeString()}</small>`:""}`)}),l.currentLocation){let b=a.divIcon({className:"custom-marker courier-marker",html:`<div style="
            background-color: #f59e0b;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.6);
          "></div>`,iconSize:[24,24],iconAnchor:[12,12]});a.marker([l.currentLocation.lat,l.currentLocation.lng],{icon:b}).addTo(d).bindPopup(`<strong>${l.currentLocation.label}</strong><br><small>Live tracking</small>`).openPopup(),a.circle([l.currentLocation.lat,l.currentLocation.lng],{radius:200,color:"#f59e0b",fillColor:"#f59e0b",fillOpacity:.2,weight:2}).addTo(d)}let g=a.latLngBounds(e.map(a=>[a.lat,a.lng]));l.currentLocation&&g.extend([l.currentLocation.lat,l.currentLocation.lng]),d.fitBounds(g,{padding:[50,50]}),setTimeout(()=>{d.invalidateSize()},100)}},[c,l]),l)?(0,b.jsx)(g.Transition,{show:c,as:e.default.Fragment,children:(0,b.jsxs)(f.Dialog,{as:"div",className:"relative z-50",onClose:d,children:[(0,b.jsx)(g.Transition.Child,{as:e.default.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30"})}),(0,b.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,b.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,b.jsx)(g.Transition.Child,{as:e.default.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,b.jsxs)(f.Dialog.Panel,{className:"relative w-full max-w-4xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all dark:bg-neutral-900",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-neutral-200 px-6 py-4 dark:border-neutral-700",children:[(0,b.jsxs)(f.Dialog.Title,{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Track Order ",a.orderNumber]}),(0,b.jsx)("button",{onClick:d,className:"rounded-full p-1 text-neutral-500 hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-white",children:(0,b.jsx)(h.XMarkIcon,{className:"h-6 w-6"})})]}),(0,b.jsxs)("div",{className:"relative h-[600px] w-full",children:[(0,b.jsx)("div",{ref:i,className:"h-full w-full"}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 z-[1000] rounded-lg bg-white/95 p-3 shadow-lg dark:bg-neutral-800/95",children:(0,b.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-green-500 border-2 border-white"}),(0,b.jsx)("span",{className:"text-neutral-700 dark:text-neutral-300",children:"Pickup Location"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-amber-500 border-2 border-white animate-pulse"}),(0,b.jsx)("span",{className:"text-neutral-700 dark:text-neutral-300",children:"Courier (Live)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-blue-500 border-2 border-white"}),(0,b.jsx)("span",{className:"text-neutral-700 dark:text-neutral-300",children:"Waypoint"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-red-500 border-2 border-white"}),(0,b.jsx)("span",{className:"text-neutral-700 dark:text-neutral-300",children:"Delivery Address"})]})]})})]}),(0,b.jsx)("div",{className:"border-t border-neutral-200 px-6 py-4 dark:border-neutral-700",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Tracking ID:"})," ",(0,b.jsx)("span",{className:"font-medium text-neutral-900 dark:text-white",children:a.tracking?.trackingId})]}),l.currentLocation&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Courier Status:"})," ",(0,b.jsx)("span",{className:"font-medium text-green-600 dark:text-green-400",children:"In Transit"})]})]})})]})})})})]})}):null}function j(a){let b=Math.floor((new Date().getTime()-a.getTime())/1e3),c=Math.floor(b/60),d=Math.floor(c/60),e=Math.floor(d/24),f=Math.floor(e/7),g=Math.floor(e/30),h=Math.floor(e/365);return b<60?"just now":c<60?`${c} minute${1!==c?"s":""} ago`:d<24?`${d} hour${1!==d?"s":""} ago`:e<7?`${e} day${1!==e?"s":""} ago`:f<4?`${f} week${1!==f?"s":""} ago`:g<12?`${g} month${1!==g?"s":""} ago`:`${h} year${1!==h?"s":""} ago`}let k={pending:"Pending",confirmed:"Confirmed",paid:"Paid",pickup_scheduled:"Pickup Scheduled",picked_up:"Picked Up",in_transit:"In Transit",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"},l={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",confirmed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",paid:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",pickup_scheduled:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",picked_up:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",in_transit:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400",out_for_delivery:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"};function m({order:a}){let[f,g]=(0,e.useState)(!1),h=new Date(a.createdAt),m="delivered"!==a.status&&"cancelled"!==a.status,n=a.tracking?.estimatedDelivery?new Date(a.tracking.estimatedDelivery):null;return(0,b.jsxs)("div",{className:"rounded-lg border border-neutral-200 bg-white p-6 transition-shadow hover:shadow-lg dark:border-neutral-700 dark:bg-neutral-900",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Order ",a.orderNumber]}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:["Placed ",j(h)]})]}),(0,b.jsx)("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${l[a.status]}`,children:k[a.status]})]}),(0,b.jsx)("div",{className:"mb-4 space-y-3",children:a.items.map(e=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[e.productImage&&(0,b.jsx)(c.default,{href:`/product/${e.productHandle}`,children:(0,b.jsx)("div",{className:"relative h-16 w-16 shrink-0 overflow-hidden rounded-lg border border-neutral-200 dark:border-neutral-700",children:(0,b.jsx)(d.default,{src:e.productImage,alt:e.productTitle,fill:!0,className:"object-cover"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(c.default,{href:`/product/${e.productHandle}`,className:"font-medium text-neutral-900 hover:text-blue-600 dark:text-white dark:hover:text-blue-400",children:e.productTitle}),(0,b.jsxs)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Quantity: ",e.quantity]}),a.seller&&(0,b.jsxs)("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["Seller: ",a.seller.name," • ",a.seller.location]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold text-neutral-900 dark:text-white",children:[parseFloat(e.totalPrice).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",e.currencyCode]}),parseFloat(e.deliveryPrice)>0&&(0,b.jsxs)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["+ ",parseFloat(e.deliveryPrice).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",e.currencyCode," delivery"]})]})]},e.id))}),m&&n&&(0,b.jsxs)("div",{className:"mb-4 rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:["Estimated Delivery: ",j(n)]}),a.tracking?.currentStatus==="picked_up"&&(0,b.jsx)("p",{className:"mt-1 text-xs text-blue-700 dark:text-blue-400",children:"Courier has picked up your order and is on the way"}),a.tracking?.route&&(0,b.jsxs)("button",{onClick:()=>g(!0),className:"mt-3 flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.513 3.58C15.53 15.494 20.55 12.5 20.55 8.25c0-4.5-4.05-8.25-9-8.25S2.55 3.75 2.55 8.25c0 4.25 5.02 7.244 9.037 8.33m0 0a18.18 18.18 0 003.963-.33m-3.963.33a18.18 18.18 0 01-3.963-.33m0 0c-4.01-1.086-9.037-4.08-9.037-8.33 0-4.5 4.05-8.25 9-8.25s9 3.75 9 8.25c0 4.25-5.027 7.244-9.037 8.33z"})}),"View Live Map"]})]}),a.tracking&&a.tracking.timeline.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:["Tracking: ",a.tracking.trackingId]}),(0,b.jsx)("div",{className:"space-y-2",children:a.tracking.timeline.slice(-3).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,b.jsx)("div",{className:"mt-1 h-2 w-2 shrink-0 rounded-full bg-blue-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:a.note}),(0,b.jsx)("p",{className:"text-neutral-400 dark:text-neutral-500",children:j(new Date(a.ts))})]})]},c))})]})]}),(0,b.jsx)("div",{className:"lg:w-64 lg:shrink-0",children:(0,b.jsxs)("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 p-4 dark:border-neutral-700 dark:bg-neutral-800",children:[(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Subtotal"}),(0,b.jsxs)("span",{className:"text-neutral-900 dark:text-white",children:[parseFloat(a.subtotal).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",a.currencyCode]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Tax"}),(0,b.jsxs)("span",{className:"text-neutral-900 dark:text-white",children:[parseFloat(a.tax).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",a.currencyCode]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Delivery"}),(0,b.jsxs)("span",{className:"text-neutral-900 dark:text-white",children:[parseFloat(a.delivery).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",a.currencyCode]})]}),(0,b.jsx)("div",{className:"border-t border-neutral-200 pt-2 dark:border-neutral-700",children:(0,b.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,b.jsx)("span",{className:"text-neutral-900 dark:text-white",children:"Total"}),(0,b.jsxs)("span",{className:"text-neutral-900 dark:text-white",children:[parseFloat(a.total).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",a.currencyCode]})]})})]}),a.paymentMethod&&(0,b.jsxs)("p",{className:"mt-3 text-xs text-neutral-500 dark:text-neutral-400",children:["Paid with ",a.paymentMethod]})]})})]}),a.tracking?.route&&(0,b.jsx)(i,{order:a,isOpen:f,onClose:()=>g(!1)})]})}function n({orders:a}){return 0===a.length?(0,b.jsx)("div",{className:"rounded-lg border border-neutral-200 bg-white p-12 text-center dark:border-neutral-700 dark:bg-neutral-900",children:(0,b.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"No orders found"})}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(m,{order:a},a.id))})}a.s(["default",()=>n],90163)}];

//# sourceMappingURL=components_orders_order-list_tsx_c947a443._.js.map