# Настройка OpenAI для генерации изображений

## Шаг 1: Получение API ключа OpenAI

1. Зайдите на https://platform.openai.com/
2. Зарегистрируйтесь или войдите в аккаунт
3. Перейдите в раздел **API keys** (https://platform.openai.com/api-keys)
4. Нажмите **Create new secret key**
5. Скопируйте ключ (он будет показан только один раз!)

## Шаг 2: Добавление API ключа в переменные окружения

### Для локальной разработки:

Создайте файл `.env.local` в папке `commerce/` (если его нет):

```env
OPENAI_API_KEY=sk-your-api-key-here
```

### Для продакшена (Vercel/cPanel/Verpex):

Добавьте переменную окружения в настройках:

- **Имя**: `OPENAI_API_KEY`
- **Значение**: `sk-your-api-key-here`

## Шаг 3: Перезапуск сервера

После добавления переменной окружения:

1. Остановите сервер (Ctrl+C)
2. Запустите заново: `npm run dev` или `npm run build && npm start`

## Важные замечания

1. **Безопасность**: Никогда не коммитьте API ключ в Git! Файл `.env.local` уже в `.gitignore`

2. **Стоимость**: OpenAI DALL-E 3 стоит примерно $0.04 за изображение (1024x1024). Для демо проекта с ~1000 товарами это может быть дорого.

3. **Fallback**: Если API ключ не настроен или API недоступен, система автоматически использует SVG изображения-заглушки.

4. **Генерация изображений**: Изображения генерируются по требованию через API route `/api/images/generate`. Для демо товаров используются SVG заглушки, а AI изображения можно генерировать отдельно по необходимости.

## Тестирование

После настройки API ключа, вы можете протестировать генерацию:

1. Откройте DevTools в браузере
2. Выполните в консоли:
```javascript
fetch('/api/images/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    prompt: 'A professional product photograph of a modern sofa',
    size: '1024x1024'
  })
})
.then(r => r.json())
.then(console.log)
```

Если всё настроено правильно, вы получите URL сгенерированного изображения.







