# Решение: Приложение Running, но сайт не работает (503/404)

## Проблема

- ✅ Приложение в статусе **Running**
- ✅ Папка `node_modules/` есть
- ✅ Зависимости установлены
- ❌ Но сайт показывает 503 или 404

Это означает, что приложение запускается, но **Next.js не может обработать запросы**.

## ✅ Решение: Проверить папку .next

### Шаг 1: Проверить наличие папки .next (КРИТИЧЕСКИ ВАЖНО!)

1. Откройте **File Manager** в cPanel
2. Перейдите в `public_html/rokets-classifieds`
3. **Включите показ скрытых файлов:**
   - Нажмите **Settings** (в правом верхнем углу)
   - Включите **Show Hidden Files (dotfiles)**
   - Нажмите **Save**
4. Проверьте наличие папки `.next/`

**Если папки `.next/` НЕТ:**
- Это основная проблема!
- Нужно обновить репозиторий через Git Version Control

**Если папки `.next/` ЕСТЬ:**
- Проверьте, что внутри есть папки `server/` и `static/`
- Если папки пустые - нужно обновить репозиторий

### Шаг 2: Обновить репозиторий

1. Откройте **Git Version Control** в cPanel
2. Найдите репозиторий `rokets-classifieds`
3. Нажмите **Pull or Deploy**
4. Выберите ветку `main`
5. Нажмите **Update from Remote**
6. Дождитесь завершения

### Шаг 3: Проверить папку .next после обновления

1. В **File Manager** проверьте папку `.next/`
2. Внутри должны быть:
   - `server/` - серверные файлы
   - `static/` - статические файлы
   - `BUILD_ID` - файл с ID сборки

### Шаг 4: Перезапустить приложение

1. В **Setup Node.js App** нажмите **Stop**
2. Подождите 10 секунд
3. Нажмите **Start**
4. Подождите 15-20 секунд
5. Проверьте статус - должно быть **Running**

### Шаг 5: Проверить работу

Откройте в браузере: `https://demo.rokets.delivery`

Должен открыться сайт.

## Если папка .next есть, но сайт не работает

### Проверка 1: Проверить содержимое папки .next

В **File Manager** проверьте:

1. `.next/server/` - должна содержать файлы
2. `.next/static/` - должна содержать файлы
3. `.next/BUILD_ID` - должен быть файл

Если папки пустые или содержат только старые файлы:
- Обновите репозиторий через Git Version Control

### Проверка 2: Проверить переменные окружения

В **Setup Node.js App** проверьте:

- `NEXT_PUBLIC_BASE_PATH` = (пустое значение)
- `NODE_ENV` = `production`

### Проверка 3: Использовать server-simple.js

1. В **Setup Node.js App** измените **Application Startup File** на `server-simple.js`
2. Нажмите **Save** и **Restart**
3. Проверьте логи (если появятся)

## Альтернатива: Пересобрать build локально

Если папка `.next/` не скачивается через Git:

1. **Локально** соберите build:
   ```bash
   cd C:\Dev\CursorProjects\Rokets_clsfd\commerce
   npm run build
   ```

2. Создайте ZIP архив папки `.next/`

3. Загрузите через **File Manager**:
   - Перейдите в `public_html/rokets-classifieds`
   - Загрузите ZIP архив
   - Распакуйте его
   - Убедитесь, что папка `.next/` находится в корне проекта

4. Перезапустите приложение

## Проверка работы

Откройте в браузере: `https://demo.rokets.delivery`

Должен открыться сайт.













